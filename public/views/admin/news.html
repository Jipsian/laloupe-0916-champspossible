<ng-include src="'../views/admin/sidenav.html'"></ng-include>

<div class="row newss" id="newssAdm">
    <div class="phraseAccroche row valign-wrapper">
        <h3 class="col s12 m6 l8"> {{vm.newss.length}} - Actualités</h3>
        <button ng-click="order='-_id'; vm.create() ; Materialize.toast('Insérez votre actualité', 2500, 'rounded')" class=" waves-effect amber lighten-4 black modal-trigger col s12 m6 l4 ">
            <i class="material-icons">add</i>Ajouter une actualité
        </button>
    </div>
</div>

<div class="row valign-wrapper blocTriOffre">
    <select ng-model="order" class="browser-default col s6 m2 l2">
        <option value="" disabled selected>Ordre d'affichage</option>
        <option value="titre">Titre croissant</option>
        <option value="-titre">Titre décroissant</option>
        <option value="date">Date croissant</option>
        <option value="-date">Date décroissant</option>
        <option value="auteur">Auteur croissant</option>
        <option value="-auteur">Auteur décroissant</option>
    </select>
</div>

<!-- Affichage des données de la table newss -->
<div class="panel panel-default" ng-repeat='news in vm.newss | orderBy:order'>
    <div class="divider"></div>
    <br>
    <br>
    <div class="panel-body">
        <form class="form-inline">
            <div class="col l6">
                <form action="/api/picture" enctype="multipart/form-data" method="post">
                    <label>{{$index}}</label>
                    <!--ID  <input type="text" class="form-control" ng-model='news._id'> -->
                    <input type="text" class="form-control" placeholder="Titre" ng-model='news.titre'>
                    <textarea type="text" class="materialize-textarea" placeholder="Texte" ng-model='news.texte'></textarea>
                    <input type="text" ng-model='news.date' class='date'>
                    <input onchange='openFile(event)' file-upload type="file" placeholder="Image" id="uploadImage-{{$index}}" accept="image/*" name='file'>
                    <br>
                    <br>
                    <img src="{{news.image}}" width="300px" name="showPict" alt="Image actualité" id='output'/>
                    <input type="text" class="form-control" placeholder="Auteur" ng-model='news.auteur'>

                </form>
            </div>
            <button ng-click='vm.update(news, $index)' class="waves-effect amber lighten-4 black modal-trigger" onclick=" Materialize.toast('Nouvelle enregistrée', 2500, 'rounded') ">
                <i class="material-icons">mode_edit</i>Enregistrer l'actualité
            </button>
            <button ng-click='vm.delete(news)' class="waves-effect amber lighten-4 black modal-trigger" onclick=" Materialize.toast('Nouvelle supprimée', 2500, 'rounded')">
                <i class="material-icons">delete</i>Supprimer l'actualité
            </button>
        </form>
    </div>
</div>
