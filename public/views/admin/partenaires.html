<div class="container">
    <!-- Zone de tri et de filtre -->
    <div class="row partenaires" id="partenairesAdm">
        <div class="phraseAccroche row valign-wrapper">
            <h1 class="col s12 m6 l8">
                Partenaires et Habitants</h1>
            <button ng-click='vm.create()' class=" waves-effect amber lighten-4 black modal-trigger col s12 m6 l4 " onclick=" Materialize.toast('Insérez votre partenaire', 2500, 'rounded')">
                <i class="material-icons">add</i>Ajouter un partenaire
            </button>
        </div>
        <div class="row valign-wrapper blocTriOffre" ng-model="query">
            <div class="col s6 m2 l2 center-align valign triOffre">Filtre :</div>
            <button class=" col s6 m2 l2 center-align valign btn triOffre" ng-click="query=''">
                <i class="material-icons iconeOffre" value="">language</i>
                Tous
            </button>
            <button class="col s6 m2 l2 center-align valign btn triOffre" ng-click="query='Partenaire'">
                <i class="material-icons iconeOffre" value="a">supervisor_account</i>
                Partenaires</button>
            <button class="col s6 m2 l2 center-align valign btn triOffre" ng-click="query='Habitant'">
                <i class="material-icons iconeOffre" value="b">assignment_ind</i>
                Habitants</button>
            <select ng-model="order" class="browser-default col s6 m2 l2">
                <option value="" disabled selected>Ordre d'affichage</option>
                <option value="nom">par Nom</option>
                <option value="sortAccueil">par ordre</option>
            </select>
        </div>
    </div>

    <!-- Affichage des données de la table partenaires/habitants -->
    <div class="panel panel-default" ng-repeat='partner in vm.partners |filter:{type:query} | orderBy:order'>
        <div class="divider"></div>
        <br>
        <br>
        <div class="panel-body">
            <form class="form-inline">
                <div class="col l10">
                    <form action="/api/picture" enctype="multipart/form-data" method="post">
                        <input type="text" class="form-control" ng-model='partner._id'>
                        <input type="text" class="form-control" placeholder="Nom" ng-model='partner.nom'>
                        <!-- <input type="text" class="form-control" placeholder="Type" ng-model='partner.type'> -->
                        <!-- liste Habitants, Partenaires () -->
                        <select class="browser-default" placeholder="Type" ng-model='partner.type'>
                            <option value="Habitant">Habitant</option>
                            <option value="Partenaire" selected>Partenaire</option>
                        </select>
                        <input type="text" class="form-control" placeholder="Domaine" ng-model='partner.domaine'>
                        <textarea type="text" class="materialize-textarea" placeholder="Petite description" ng-model='partner.smallDescription'></textarea>
                        <textarea type="text" class="materialize-textarea" placeholder="Description complète" ng-model='partner.bigDescription'></textarea>
                        <input type="text" class="form-control" placeholder="Téléphone" ng-model='partner.tel'>
                        <input type="text" class="form-control" placeholder="Mail" ng-model='partner.mail'>
                        <input type="text" class="form-control" placeholder="Site internet" ng-model='partner.site'>
                        <input type="text" class="form-control" placeholder="Ordre d'affichage" ng-model='partner.sortAccueil'>
                        <input onchange='openFile(event)' file-upload type="file" placeholder="Image" id="uploadImage-{{$index}}" accept="image/*" name='file'>
                        <br>
                        <br>
                        <img src="{{partner.logo}}" width="300px" name="showPict" alt="Image partenaire habitant"/>
                        <img id='output' width="300px"/>
                    </form>
                </div>
                <button ng-click='vm.update(partner, $index)' class="waves-effect amber lighten-4 black modal-trigger" onclick=" Materialize.toast('Partenaire enregistré', 2500, 'rounded') ">
                    <i class="material-icons">mode_edit</i>Enregistrer le partenaire
                </button>

                <button ng-click='vm.delete(partner)' class="waves-effect amber lighten-4 black modal-trigger" onclick=" Materialize.toast('Partenaire supprimé', 2500, 'rounded')">
                    <i class="material-icons">delete</i>Supprimer le partenaire
                </button>

            </form>
        </div>
    </div>
</div>

<script>
    var openFile = function(event) {
        var input = event.target;

        var reader = new FileReader();
        reader.onload = function() {
            var dataURL = reader.result;
            var output = document.getElementById('output');
            output.src = dataURL;
        };
        reader.readAsDataURL(input.files[0]);
    };
</script>
